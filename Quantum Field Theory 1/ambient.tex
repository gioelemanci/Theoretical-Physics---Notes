% ===== Page Layout and Style =====
\pagestyle{fancy}
\fancyhf{} % Clear all header and footer fields
\fancyhead[LE,RO]{\thepage} % Page numbers on outer side (Left Even, Right Odd)
\fancyhead[RE]{\leftmark}   % Chapter name on right side of even pages
\fancyhead[LO]{\rightmark}  % Section name on left side of odd pages

% ===== Chapter title formattation =====
\titleformat{\chapter}[hang]
  {\normalfont\bfseries\Huge} % text format
  {\thechapter\hspace{1em}\rule{1pt}{30pt}\hspace{1em}} % number + line + space
  {0pt}
  {} % title next to number
% Sections always in cleared page
\newcommand{\sectionbreak}{\clearpage}

% Document geometry settings
\geometry{
  a4paper,
  left=3cm,    % Left margin
  right=3cm,   % Right margin
  top=3cm,     % Top margin
  bottom=3cm,  % Bottom margin
}

% Line spacing and paragraph settings
\linespread{1.2}            % 1.2 line spacing
\setlength{\parskip}{0.5em} % Vertical space between paragraphs
\setlength{\parindent}{0pt} % No paragraph indentation
\setlength{\headheight}{14pt}

% ===== Equation Numbering =====
\numberwithin{equation}{section}

% ===== Theorem Environments =====
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}

% ===== Definition Environment =====
\theoremstyle{definition}
\newtheorem{definition}{Definition}[chapter]

% ===== Custom Environments =====
\newenvironment{application}[1][]
  {\begin{adjustwidth}{1.5em}{0pt}
   \begingroup
   \setlength{\parindent}{0pt}
   \par\vspace{0.5em}\noindent\textbf{Application} #1.\par\nobreak\ignorespaces}
  {\par\vspace{0.5em}\endgroup\end{adjustwidth}}
\newenvironment{remark}[1][]
  {\begin{adjustwidth}{1.5em}{0pt}
   \begingroup
   \setlength{\parindent}{0pt}
   \par\vspace{0.5em}\noindent\textbf{Remark.} #1\ \itshape}
  {\par\vspace{0.5em}\endgroup\end{adjustwidth}}
\newenvironment{example}[1][]
  {\begin{adjustwidth}{1.5em}{0pt}
   \begingroup
   \setlength{\parindent}{0pt}
   \par\vspace{0.5em}\noindent\textbf{Example} #1.\par\nobreak\ignorespaces}
  {\par\vspace{0.5em}\endgroup\end{adjustwidth}}
\newenvironment{notation}[1][]
  {\begin{adjustwidth}{1.5em}{0pt}
   \begingroup
   \setlength{\parindent}{0pt}
   \par\vspace{0.5em}\noindent\textbf{Notation} #1.\ \ignorespaces}
  {\par\vspace{0.5em}\endgroup\end{adjustwidth}}