\section{Two Real Klein Gordon Fields}\label{sec:two_real_KG_fields}

Since our final goal is to describe all particles and their interactions, we can start to study a more complex model: the quantization of a system with more than one field.

The simplest generalization is the following: two real KG fields \(\psi_1\) and \(\psi_2\) with different masses \(m_1 \neq m_2\). We are assuming the fields to be free, non interacting, so we can write the Lagrangian as the sum of two independent KG Lagrangian:
\begin{equation}
    \mathcal{L} = \sum_{i=1,2} \frac{1}{2}\partial_\mu \psi_i \partial^{\mu} \psi_i - \frac{m_i^2}{2}\psi_i^2.
    \label{eq:KG_lagrangian_two_fields}
\end{equation}
Since the lagrangian is a sum of decoupled and independently Lagrangians, we can derive the KG equation as a system of two independent equations:
\[
    \begin{dcases}
        (\Box + m_1^2) \psi_1(x) = 0; \\
        (\Box + m_2^2) \psi_2(x) = 0. \\
    \end{dcases}
\]
Following this procedure, other foundamental quantities will be defined as the sum of the corresponding quantities defined for the single scalar field: we are interested in Hamiltonian, momentum and number of particles:
\[
    H = H_1 + H_2, \quad \mathbf{P} = \mathbf{P}_1 + \mathbf{P}_2, \quad N = N_1 + N_2.
\]
Now we can use ladder operators in normal ordering to promote those quantities to operators acting on the fields:
\[
    \begin{aligned}
        \hat{H}_i & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3}\, \omega_{i,\,\mathbf{p}} \hat{a}^{\dagger}_{i,\,\mathbf{p}}\hat{a}_{i,\,\mathbf{p}}; \\
        \hat{P}_i & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3}\, \mathbf{p} \hat{a}^{\dagger}_{i,\,\mathbf{p}}\hat{a}_{i,\,\mathbf{p}};              \\
        \hat{N}_i & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3}\, \hat{a}^{\dagger}_{i,\,\mathbf{p}}\hat{a}_{i,\,\mathbf{p}}.
    \end{aligned}
\]
Notice how we are basically spanning all the space (with the integral over all possible momenta) and counting the particles in it, then multiplying them by the actual eigenvalue in which we are interested: \(\omega_{i,\,\mathbf{p}}\) for the energy or \(\mathbf{p}\) for the momentum. The ladder operators create or destroy a particle of mass \(m_i\) and momentum \(\mathbf{p}\) accordingly to the previous definitions:
\[
    \ket{\mathbf{p}_{(1)}} = \hat{a}^{\dagger}_{1,\,\mathbf{p}} \ket{0}, \quad \ket{\mathbf{p}_{(2)}} = \hat{a}^{\dagger}_{2,\,\mathbf{p}} \ket{0},
\]
where these particles have different masses and energies
\[
    \hat{H} \ket{\mathbf{p}_{(1)}} = \omega_{1,\,\mathbf{p}} \ket{\mathbf{p}_{(1)}}, \quad \omega_{1,\,\mathbf{p}}\neq \omega_{2,\,\mathbf{p}} \text{ since } m_1 \neq m_2;
\]
but they are degenerate as far as number of particles and momentum are concerned:
\[
    \begin{aligned}
        \hat{P} \ket{\mathbf{p}_{(i)}} & = \mathbf{p} \ket{\mathbf{p}_{(i)}}, \quad \mathbf{p}_1 = \mathbf{p}_2 = \mathbf{p}; \\
        \hat{N} \ket{\mathbf{p}_{(i)}} & = 1 \ket{\mathbf{p}_{(i)}}, \quad n=1 \text{ for both fields.}
    \end{aligned}
\]
Thus these three operators are simultaneously diagonalizable, having the same set of eigenstates (forming a complete ON basis) but different eigenvalues.

\subsection{Equal Mass Scalar Fields}

The more interesting case is when both fields share the same mass \(m_1 = m_2 = m\): what happens to the system?\footnote{We drop for now the index \(i\) on the energy \(\omega_i,\mathbf{p}\) since they are equal for both fields, but in the following refinements we will reintroduce them to avoid confusion.}
To start now we have equal eigenvalues for all the three previously considered operators.
Furthermore, if we imagine the two KG fields as two axis of a plane we can deduce a new property of the system: if the state is a vector on this \((\psi_1 - \psi_2)\) plane, we have aquired a \textbf{rotational symmetry} in the space of fields.
Since the Lagrangian is unvariant under a new group of transformations, we have aquired also a new Noether's current and charge.

We can write the field in a vectorial representation as
\[
    \vec{\psi}(x) = \begin{pmatrix}
        \psi_1 (x) \\
        \psi_2(x)
    \end{pmatrix} \in \mathbb{R}^2, \quad \vec{\psi}^T(x) = \begin{pmatrix}
        \psi_1 (x) & \psi_2(x)
    \end{pmatrix};
\]
then we can express the Lagrangian on this new field plane as:
\begin{equation}
    \mathcal{L} = \frac{1}{2} (\partial_\mu \vec{\psi}^T(x)) (\partial^{\mu} \vec{\psi}(x)) - \frac{m^2}{2}\vec{\psi}^T(x)\vec{\psi}(x).
    \label{eq:KG_lagrangian_two_fields_vector}
\end{equation}
Thus this Lagrangian goes to itself after a \(\mathrm{SO}(2)\) transformation:
\[
    \mathcal{L} \xrightarrow{\mathrm{SO}(2)} \mathcal{L}^{\prime} = \mathcal{L},
\]
where we have to pay attention to consider a \textbf{global} \(\mathrm{SO}(2)\) transformation, thus rotating every point of the \textit{field space} \((\psi_1 - \psi_2)\) under the same transformation. \textbf{Local} transformations (such as \textit{gauge transformations}) change the Lagrangian, but if we add suitable interactions, we may result in canceling out the asymmetries of the Lagrangian making it invariant even under local transformations.

Remaining in free theories, we aim to find the Noether current and consequently its charge. Let's consider a transformation \(R \in \mathrm{SO}(2)\), then \(R^T = R^{-1}\) and \(\det R = 1\):
\[
    \vec{\psi} \to \vec{\psi}^{\prime} = R \vec{\psi}.
\]
\(R\) is a continuous global symmetry for our Lagrangian, then let us study the infinitesimal transformation:
\[
    R = \begin{pmatrix}
        \cos \theta  & \sin \theta \\
        -\sin \theta & \cos \theta
    \end{pmatrix} \sim \begin{pmatrix}
        1       & \theta \\
        -\theta & 1
    \end{pmatrix},
\]
so that the we can compute the infinitesimal variation of the fields for the expression of the Noether current. Let us begin from the transformed field
\[
    \vec{\psi}^{\prime} = \begin{pmatrix}
        \psi_1^{\prime} \\
        \psi_2^{\prime}
    \end{pmatrix} = \begin{pmatrix}
        1       & \theta \\
        -\theta & 1
    \end{pmatrix}\begin{pmatrix}
        \psi_1 \\
        \psi_2
    \end{pmatrix}\implies \begin{dcases}
        \psi_1^{\prime} = \psi_1 + \theta \psi_2; \\
        \psi_2^{\prime} = \psi_2 -\theta \psi_1.
    \end{dcases}
\]
from which is now easy to compute the variation of the fields under the infinitesimal transformation
\[
    \begin{dcases}
        \delta \psi_1 = \psi_1^{\prime} -\psi_1 = \theta \psi_2; \\
        \delta \psi_2 = \psi_2^{\prime} -\psi_2 = -\theta \psi_1.
    \end{dcases}
\]
Now we can compute the expression for the Noether current by recalling its definition in \eqref{eq:Noether_current}:
\[
    \frac{\partial \mathcal{L}}{\partial(\partial_{\mu} \psi_1)} \delta \psi_1 + \frac{\partial \mathcal{L}}{\partial(\partial_{\mu} \psi_2)} \delta \psi_2 = K^{\mu} = 0,
\]
where we have set \(K^{\mu} = 0\) since the Lagrangian is exactely invariant under the transformation. Plugging in the variations of the fields we have just computed, we get:\footnote{Remember that \(\partial_\mu \vec{\psi}^T \partial^{\mu} \vec{\psi} = \partial_\mu \psi_1 \partial^{\mu} \psi_1 + \partial_\mu \psi_2 \partial^{\mu} \psi_2\), thus the derivative of the Lagrangian with respect to \(\partial_{\mu}\psi_1\) is just \(\partial^{\mu}\psi_1\) and similarly for \(\psi_2\), after a brief computation which starts lowering all the partial derivatives indices (notice how the \(1/2\) factor has been canceled out during the derivative).}
\[
    J^{\mu} = (\partial^{\mu} \psi_1) (\theta \psi_2) + (\partial^{\mu} \psi_2)(-\theta \psi_1) = \theta \left[ (\partial^{\mu} \psi_1) \psi_2 - (\partial^{\mu} \psi_2) \psi_1 \right].
\]
Ignoring the constant \(\theta\) (which can be absorbed in the definition of the current since it's just an overall normalization) we have finally found the expression for the Noether current:
\[
    J^{\mu} = (\partial^{\mu} \psi_1) \psi_2 - (\partial^{\mu} \psi_2) \psi_1.
\]
Now we can compute the conserved charge associated to this current:
\[
    Q = \int \mathrm{d}^3 \mathbf{x} \, J^0 = \int \mathrm{d}^3 x \left[ (\partial^{0} \psi_1) \psi_2 - (\partial^{0} \psi_2) \psi_1 \right].
\]
We can recognize the canonical momenta \(\pi_i = \partial^{0} \psi_i\) in the expression above, thus we can rewrite the charge as
\[
    Q = \int \mathrm{d}^3 \mathbf{x} \, [\pi_1 \psi_2 - \pi_2 \psi_1].
\]
Now it is time to promote this quantity to an operator acting on the quantum fields: we substitute the classical fields with the corresponding expressions in terms of ladder operators:
\[
    \begin{aligned}
        \hat{Q}      & = \int \mathrm{d}^3 \mathbf{x} \, [\hat{\pi}_1 \hat{\psi}_2 - \hat{\pi}_2 \hat{\psi}_1]                                                                                                                                                       \\
        \hat{\pi}_i  & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} (-i) \sqrt{\frac{\omega_{\mathbf{p}}}{2}}  \left[ \hat{a}_{i,\,\mathbf{p}} e^{i \mathbf{p} \cdot \mathbf{x}} - \hat{a}^{\dagger}_{i,\,\mathbf{p}} e^{-i \mathbf{p} \cdot \mathbf{x}} \right], \\
        \hat{\psi}_i & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{\sqrt{2\omega_{\mathbf{p}}}} \left[ \hat{a}_{i,\,\mathbf{p}} e^{i \mathbf{p} \cdot \mathbf{x}} + \hat{a}^{\dagger}_{i,\,\mathbf{p}} e^{-i \mathbf{p} \cdot \mathbf{x}} \right].
    \end{aligned}
\]
computing a final expression for the charge operator, which has to be normal ordered:\footnote{We would require the index \(i\) on \(\omega_{\mathbf{p}}\) since in general the we are considering different energies associated to different fields, but for now this is not a problem (since \(m_1 = m_2 = m\)).}
\[
    \begin{aligned}
        \int \mathrm{d}^3 \mathbf{x} \, \hat{\pi}_1 \hat{\psi}_2 & =  \frac{-i}{2}\int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{\mathrm{d}^3 \mathbf{q}}{(2\pi)^3} \sqrt{\frac{\omega_{\mathbf{p}}}{\omega_{\mathbf{q}}}} \left[ \delta^{(3)}(\mathbf{p} + \mathbf{q})\left( \hat{a}_{1,\,\mathbf{p}} \hat{a}_{2,\,\mathbf{q}} - \hat{a}^{\dagger}_{1,\,\mathbf{p}} \hat{a}^{\dagger}_{2,\,\mathbf{q}}\right) \right. \\
                                                                 & \left. + \delta^{(3)}(\mathbf{p} - \mathbf{q})\left( \hat{a}_{1,\,\mathbf{p}} \hat{a}^{\dagger}_{2,\,\mathbf{q}} - \hat{a}^{\dagger}_{1,\,\mathbf{p}} \hat{a}_{2,\,\mathbf{q}}\right) \right]                                                                                                                                                            \\
                                                                 & = \frac{-i}{2} \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \left[\hat{a}_{1,\,\mathbf{p}} \hat{a}_{2,\,-\mathbf{p}} - \hat{a}^{\dagger}_{1,\,\mathbf{p}} \hat{a}^{\dagger}_{2,\,-\mathbf{p}} + \hat{a}_{1,\,\mathbf{p}} \hat{a}^{\dagger}_{2,\,\mathbf{p}} - \hat{a}^{\dagger}_{1,\,\mathbf{p}} \hat{a}_{2,\,\mathbf{p}} \right],                      \\
    \end{aligned}
\]
where after an integration over \(\mathrm{d}^3 \mathbf{x}\) (in the charge expression) we found the delta function, which we can apply performing one of the momentum integrals, obtaining also \(\omega_{\mathbf{p}} = \omega_{\mathbf{q}} = \omega_{-\mathbf{p}}\) since \(m_1 = m_2 = m\). Similarly we can compute the second term, which is identical if we swap the indices \(1 \leftrightarrow 2\) and subtracting it:\footnote{Note that \(\hat{a}_1\) and \(\hat{a}_2\) with or without daggers commute since they act on different fields: the term \(\propto \delta^{(3)}(\mathbf{p}-\mathbf{q})\) doubles itself, while the term \(\propto \delta^{(3)}(\mathbf{p}+\mathbf{q})\) cancels out after making the change of variable \(\mathbf{p} \to -\mathbf{p}\) in the second integral.}
\[
    \hat{Q} = -i \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \left[ \hat{a}^{\dagger}_{1,\,\mathbf{p}} \hat{a}_{2,\,\mathbf{p}} - \hat{a}^{\dagger}_{2,\,\mathbf{p}} \hat{a}_{1,\,\mathbf{p}} \right].
\]
Note that there is an ambiguity: \(\hat{Q}\) is an hermitian operator (good, physical quantity), but if it is conserved and we take \(c_1 \hat{Q} + c_2\) is also conserved:
\[
    \ddt (c_1 \hat{Q} + c_2) = c_1 \ddt \hat{Q} = 0,
\]
so \(c_1\) controls \textit{units} in which \(Q\) is measured (not so crucial, like a renormalization factor, but influence the \(\hat{Q}\) eigenvalues: we could set it to a generic \(q\) and use it as eigenvalue); \(c_2\) instead is just a constant which can be removed by normal ordering (similar to what we did for the Hamiltonian and the vacuum energy).

\[
    \begin{aligned}
        \hat{Q}\ket{0}         & = -i \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \left[ \hat{a}^{\dagger}_{1,\,\mathbf{p}} \hat{a}_{2,\,\mathbf{p}} - \hat{a}^{\dagger}_{2,\,\mathbf{p}} \hat{a}_{1,\,\mathbf{p}} \right] \ket{0} = 0, \\
        \hat{\tilde{Q}}\ket{0} & = (\hat{Q} + c_2) \ket{0} = c_2 \ket{0}, \iff \bra{0}\hat{\tilde{Q}} \ket{0} = c_2 \langle 0|0 \rangle = c_2,                                                                                            \\
        :\hat{\tilde{Q}}:      & = \hat{\tilde{Q}} - \bra{0}\hat{\tilde{Q}} \ket{0} = \hat{Q}.
    \end{aligned}
\]

Let us now determine the spectrum of the theory by exploiting the properties of the ladder operators: let us define:
\[
    \begin{aligned}
        \hat{a}_{\pm,\,\mathbf{p}}           & = \frac{1}{\sqrt{2}} \left( \hat{a}_{1,\,\mathbf{p}} \pm i \hat{a}_{2,\,\mathbf{p}} \right),                     \\
        \hat{a}_{\pm,\,\mathbf{p}}^{\dagger} & = \frac{1}{\sqrt{2}} \left( \hat{a}_{1,\,\mathbf{p}}^{\dagger} \mp i \hat{a}_{2,\,\mathbf{p}}^{\dagger} \right).
    \end{aligned}
\]

It can be shown (full computation in appendix \ref{app:computations}) that the following commutators relate the new ladder operators to the charge operator:
\[
    \begin{aligned}
        [\hat{Q},\, \hat{a}_{\pm,\,\mathbf{p}}]           & = \mp \hat{a}_{\pm,\,\mathbf{p}},           \\
        [\hat{Q},\, \hat{a}_{\pm,\,\mathbf{p}}^{\dagger}] & = \pm \hat{a}_{\pm,\,\mathbf{p}}^{\dagger},
    \end{aligned}
\]

Let us now consider the state \(\ket{s}\) with charge \(q_s \longrightarrow \hat{Q}\ket{s} = q_s \ket{s}\), then:
\[
    \hat{Q}(\hat{a}_{\pm,\,\mathbf{p}}^{\dagger}\ket{s}) = [\hat{Q},\, \hat{a}_{\pm,\,\mathbf{p}}^{\dagger}] \ket{s} + \hat{a}_{\pm,\,\mathbf{p}}^{\dagger} \hat{Q} \ket{s} = (q_s \pm 1) (\hat{a}_{\pm,\,\mathbf{p}}^{\dagger}\ket{s}),
\]
thus we recognize \(\hat{a}_{\pm,\,\mathbf{p}}^{\dagger}\) to be a \textit{ladder operator}\footnote{In the more general sense of an operator that let you go up and down in eigenstates referring to a particular eigenvalue.} for \(\hat{Q}\), since after its application onto \(\ket{s}\) eiqenvalue of \(\hat{Q}\), it went from the eigenspace of \(q_s\) to the eigenspace of \(q_s \pm 1\); they are ladder operators even for \(\hat{H}\) and \(\hat{P}\) (linear combinations of \(\hat{a}_{1,\,\mathbf{p}}^{\dagger}\) and \(\hat{a}_{2,\,\mathbf{p}}^{\dagger}\) are ladder operators for \(\hat{H}\) and \(\hat{P}\)).

Our goal is now to find \textit{common eigenstates} of \(\hat{H}\), \(\hat{P}\) and \(\hat{Q}\):
\[
    \begin{aligned}
        \hat{Q} \ket{0} & = 0, \text{ from normal ordering,}                              \\
        \ket{s_n^{\pm}} & = \prod_{i=1}^n \hat{a}_{\pm,\,\mathbf{p}_i}^{\dagger} \ket{0},
    \end{aligned}
\]
so we have \(n\) particle states with positive (\(\ket{s_n^{+}}\)) or negative charge (\(\ket{s_n^{-}}\)), for a total charge of either \(\pm nq\):\footnote{The computations for these secolar equations are tedious and not instructive.}
\[
    \begin{aligned}
        \hat{H} \ket{s_n^{\pm}} & = \left( \sum_{i=1}^n \omega_{\mathbf{p}_i} \right) \ket{s_n^{\pm}}, \\
        \hat{P} \ket{s_n^{\pm}} & = \left( \sum_{i=1}^n \mathbf{p}_i \right) \ket{s_n^{\pm}},          \\
        \hat{N} \ket{s_n^{\pm}} & = \pm n \ket{s_n^{\pm}},                                             \\
        \hat{Q} \ket{s_n^{\pm}} & = \pm nq \ket{s_n^{\pm}}.
    \end{aligned}
\]
This symmetry exists only for \(m_1 = m_2 = m\), otherwise we have no internal symmetries and cannot find a Noether's charge. Thus a particle described by two real KG fields with the same mass can be characterized by 3 quantum numbers, i.e. the eigenvalues of three operators: energy, momentum and charge.

\(\hat{Q}\) is the \textbf{electric charge} and it can describe \textit{particles/antiparticles} with \textbf{positive} energy: \(\ket{s_n^{\pm}}\) describes the sign of the charge: \(\ket{s_n^{+}}\) for \textbf{particle} states and \(\ket{s_n^{-}}\) for \textbf{antiparticle} states.

If we were, for example, to create a state with both particle and antiparticle, we would have:
\[
    \left( \hat{a}^{\dagger}_{+,\,\mathbf{p}} \hat{a}^{\dagger}_{-,\,\mathbf{p}}\right) \ket{0} = \ket{S}, \quad \hat{Q} \ket{S} = 0, \quad \hat{H} \ket{S} = 2 \omega_{\mathbf{p}} \ket{S},
\]
so a state with particle and antiparticle with same momentum has zero total charge but nonzero energy.

Note that one real KG field can only describe a \(Q=0\) particle
\[
    Q = \int \mathrm{d}^3 \mathbf{x} \, [\dot{\psi_1} \psi_2 - \dot{\psi_2} \psi_1] = 0, \text{ for } \psi_1 = \psi_2 = \psi,
\]
if \(\psi_1=\psi_2=\psi\), we need at least 2 degrees of freedom if we want to get a more complete description of a picture with particles and antiparticles with nonzero electric charge: \textbf{complex KG field}.

\subsection{Complex Klein Gordon Field}

The initial Lagrangian can be rewritten also as follows
\[
    \mathcal{L} =\partial_\mu \psi^* \partial^{\mu} \psi - m^2 \psi^* \psi,
\]
with
\[
    \psi(x) = \frac{1}{\sqrt{2}}(\phi_1(x)+i \phi_2(x)), \quad \psi^*(x) = \frac{1}{\sqrt{2}}(\phi_1(x)-i \phi_2(x));
\]
this is the \textbf{complex Klein Gordon field}, which can be seen as two real KG fields \(\phi_1\) and \(\phi_2\) combined into a single complex field. Obviously the equations of motion derived from this Lagrangian are the same KG equations for both \(\phi_1\) and \(\phi_2\), and one could prove that substituting back \(\phi_1\) and \(\phi_2\) into the Lagrangian we would recover the previous expression.

In this form, it is easy to recognize that Lagrangian is invariant under a global \(\mathrm{U}(1)\) transformation:\footnote{Note that the factor \(q\) in the exponential transformation is inserted only to get the correct charge normalization in the end.}
\[
    \psi(x) \xrightarrow[\mathrm{U}(1)]{\text{global}} \psi^{\prime}(x) = e^{i q\theta} \psi(x),
\]
where it's important that \(\theta \neq \theta(x)\) so that the Lagrangian remains invariant (remember that \(\mathcal{L}^{\prime} = \mathcal{L} \implies K^{\mu} = 0\) when computing the Noether current). In fact, under this transformation we notice how \(\partial^{\mu} \theta= 0\) is needed to recover the invariance:
\[
    \partial_\mu \psi(x) \xrightarrow[\mathrm{U}(1)]{\text{global}} \partial_\mu \psi^{\prime}(x) = e^{i q \theta} \partial_\mu \psi(x) + i q (\partial_\mu \theta) \psi(x) = e^{i q \theta} \partial_\mu \psi(x),
\]
hence \(\mathcal{L} \xrightarrow{\mathrm{U}(1)} \mathcal{L} ^{\prime} =\mathcal{L}\) and we can now consider the infinitesimal transformation:
\[
    \psi(x) \to \psi^{\prime}(x) = (1 + i q \theta) \psi(x) \implies \delta \psi(x) = i q \theta \psi(x);
\]
similarly for \(\psi^*(x)\); thus we can compute the infinitesimal variations of the fields:
\[
    \begin{dcases}
        \delta \psi(x)   = i q \theta \psi(x); \\
        \delta \psi^*(x) = -i q \theta \psi^*(x).
    \end{dcases}
\]
Now we can compute the Noether current associated to this symmetry:
\[
    \begin{aligned}
        J^{\mu} & = \frac{\partial \mathcal{L}}{\partial (\partial_{\mu} \psi)} \delta \psi + \frac{\partial \mathcal{L}}{\partial (\partial_{\mu} \psi^*)} \delta \psi^* = i q \theta [(\partial^{\mu} \psi^*) \psi - (\partial^{\mu} \psi) \psi^*],
    \end{aligned}
\]
where, as we expected, the current is very similar to the one we found for the two real KG fields, just rewritten in terms of \(\psi\) and \(\psi^*\), and if we were to consider a real KG field (\(\psi=\psi^*\)) then we would have obtained zero current.

Finally, for the total charge (which is conserved) we can compute:
\[
    Q = \int \mathrm{d}^3 \mathbf{x} \, J^0 = i q \int \mathrm{d}^3 \mathbf{x} \, [(\partial^{0} \psi^*) \psi - (\partial^{0} \psi) \psi^*] = i q \int \mathrm{d}^3 \mathbf{x} \, [\pi^* \psi - \pi \psi^*].
\]
As we did before, we can promote this quantity to an operator acting on the quantum fields, by substituting the classical fields with the corresponding expressions in terms of ladder operators:
\[
    \begin{aligned}
        \psi(x)   & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{\sqrt{2\omega_{\mathbf{p}}}} \left[ \hat{a}_{+,\,\mathbf{p}} e^{i \mathbf{p} \cdot \mathbf{x}} + \hat{a}^{\dagger}_{-,\,\mathbf{p}} e^{-i \mathbf{p} \cdot \mathbf{x}} \right], \\
        \psi^*(x) & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{\sqrt{2\omega_{\mathbf{p}}}} \left[ \hat{a}_{-,\,\mathbf{p}} e^{i \mathbf{p} \cdot \mathbf{x}} + \hat{a}^{\dagger}_{+,\,\mathbf{p}} e^{-i \mathbf{p} \cdot \mathbf{x}} \right],
    \end{aligned}
\]
and since the new \(\hat{a}_{\pm, \mathbf{p}}\) are ladder operators, they should satisfy the usual commutation relations among themselves, thus we can compute the final expression for the charge operator in the same way as before, obtaining (after normal ordering):
\[
    \hat{Q} = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} q \left[ \hat{a}^{\dagger}_{+,\,\mathbf{p}} \hat{a}_{+,\,\mathbf{p}} - \hat{a}^{\dagger}_{-,\,\mathbf{p}} \hat{a}_{-,\,\mathbf{p}} \right].
\]
This expression is very intuitive: the charge operator counts the number of particles created by \(\hat{a}^{\dagger}_{+,\,\mathbf{p}}\) (particles with positive charge) minus the number of particles created by \(\hat{a}^{\dagger}_{-,\,\mathbf{p}}\) (particles with negative charge, i.e. antiparticles):
\[
    \hat{Q} = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} q \left[ \hat{N}_{+,\,\mathbf{p}} - \hat{N}_{-,\,\mathbf{p}} \right] = q \left( \hat{N}_{+} - \hat{N}_{-} \right).
\]
Since we are considering a free theory, \(\hat{Q}\), \(\hat{N}_+\), and \(\hat{N}_-\) are separately conserved quantities, meaning they commute with the Hamiltonian and do not change with time. In interacting theories, however, only the total charge \(\hat{Q}\) remains conserved, while the individual particle numbers \(\hat{N}_+\) and \(\hat{N}_-\) may vary due to particle-antiparticle creation and annihilation processes: interactions can create or destroy particle-antiparticle pairs, but the net charge remains constant.

\section{Heisenberg Picture and Propagators}

Is our quantum theory Lorentz invariant? Does it preserve causality?
These questions arise because when we quantized the KG field, we imposed commutation relations at equal times:
\[
    [\hat{\psi}(\mathbf{x}, t),\, \hat{\pi}(\mathbf{y}, t)] = i \delta^{(3)}(\mathbf{x}-\mathbf{y}),
\]
which are not manifestly Lorentz invariant since they treat time and space differently. We were working in the Schrödinger picture, where states evolve in time
\[
    i \ddt \ket{\mathbf{p}(t)} = \hat{H} \ket{\mathbf{p}(t)}, \quad \ket{\mathbf{p}(t)} = e^{-i \hat{H} t} \ket{\mathbf{p}(0)} = e^{-i \omega_{\mathbf{p}} t} \ket{\mathbf{p}(0)},
\]
while operators remain constant, thus our field operators as well as the all the observables are defined at a fixed time \(t\)
\[
    \begin{aligned}
        \hat{\psi} & = \hat{\psi}(\mathbf{x}), \\
        \hat{\pi}  & = \hat{\pi}(\mathbf{x}).
    \end{aligned}
\]
To answer these questions, we need to move to the Heisenberg picture, where operators evolve in time while states remain constant. In this picture, the time evolution of an operator \(\hat{O}_H\) is given by:\footnote{The pedices indicates if we are referring to the Schrödinger (\(S\)) or Heisenberg (\(H\)) picture.}
\[
    \hat{O}_H(t) = e^{i \hat{H} t} \hat{O}_S e^{-i \hat{H} t},
\]
and the time derivative of the operator is given by:
\[
    \ddt \hat{O}_H(t) = i \hat{H} e^{i \hat{H} t} \hat{O}_S e^{-i \hat{H} t} + e^{i \hat{H} t} \hat{O}_S e^{-i \hat{H} t} (-i \hat{H}) = -i [\hat{O}_H(t),\, \hat{H}].
\]

Thus if in the Schrödinger picture we had canonical commutation relations (computed at the same istant by definition of time independent operators)
\[
    \begin{dcases}
        \left[\hat{\psi}(\mathbf{x}),\, \hat{\psi}(\mathbf{y})\right] = \left[\hat{\pi}(\mathbf{x}),\, \hat{\pi}(\mathbf{y})\right] = 0, \\
        \left[\hat{\psi}(\mathbf{x}),\, \hat{\pi}(\mathbf{y})\right] = i \delta^{(3)}(\mathbf{x}-\mathbf{y}),
    \end{dcases}
\]
in the Heisenberg picture we have \textbf{equal-time canonical commutation relations}:
\[
    \begin{dcases}
        \left[\hat{\psi}(\mathbf{x}, t),\, \hat{\psi}(\mathbf{y}, t)\right] = \left[\hat{\pi}(\mathbf{x}, t),\, \hat{\pi}(\mathbf{y}, t)\right] = 0, \\
        \left[\hat{\psi}(\mathbf{x}, t),\, \hat{\pi}(\mathbf{y}, t)\right] = i \delta^{(3)}(\mathbf{x}-\mathbf{y}).
    \end{dcases}
\]
When two events are separated by a spacelike interval (outside each other's light cones), there exists a reference frame in which they occur at the same time. Therefore, to ensure causality in our quantum field theory, we require that operators corresponding to measurements at spacelike-separated points commute. This means that measurements performed at these points cannot influence each other (they can be measured with arbitrary precision independently at the same time), preserving the principle of causality.

\(\hat{\psi}(t, \mathbf{x})\) and \(\hat{\psi}(t, \mathbf{y})\) are certainly spacelike separated if \(\mathbf{x} \neq \mathbf{y}\) at equal times, since they are describing events that occur at different spatial locations simultaneously.

\paragraph{KG in Heisemberg picture.} We want now to see how the field operators evolve in time in the Heisenberg picture:\footnote{Note that in the commutator we are using Heisenberg oprators, even if we do not know their expression yet; we can since the relations we will use are all well defined and applied at equal times, there will be no problems. The expression of the Hamiltonian comes from the Schrödinger picture Legendre transform of equation \eqref{eq:hamiltonian_density_legendre} (after quantization), and then promoted to the Heisenberg picture.}\QUESTION{Why partial derivative wrt time? Shouldn't it be total derivative? (I wrote total, prof notes say partial.)}
\[
    \begin{aligned}
        \ddt \hat{\psi} (\mathbf{x}, t) & = i \left[\hat{H}(t),\,\hat{\psi}(\mathbf{x}, t) \right] = \frac{i}{2} \left[\int \mathrm{d}^3 \mathbf{y} \, \left( \hat{\pi}^2(\mathbf{y},t) + \vert \nabla_{\mathbf{y}}  \hat{\psi}(\mathbf{y},t) \vert^2 + m^2 \hat{\psi}^2(\mathbf{y},t) \right),\,\hat{\psi}(\mathbf{x}, t)\right]                               \\
                                        & = \frac{i}{2} \int \mathrm{d}^3 \mathbf{y} \, \left\{ \left[ \hat{\pi}^2(\mathbf{y},t),\,\hat{\psi}(\mathbf{x}, t) \right] + \left[ \vert \nabla_{\mathbf{y}} \hat{\psi}(\mathbf{y},t) \vert^2,\,\hat{\psi}(\mathbf{x},t)\right] + m^2 \left[ \hat{\psi}^2(\mathbf{y},t),\,\hat{\psi}(\mathbf{x}, t) \right] \right\} \\
                                        & \qquad \left[ \hat{\pi}^2(\mathbf{y},t),\,\hat{\psi}(\mathbf{x}, t) \right] = 2\hat{\pi}(\mathbf{y},t) [\hat{\pi}(\mathbf{y},t),\,\hat{\psi}(\mathbf{x}, t)] = -2i \delta^{(3)}(\mathbf{x}-\mathbf{y}) \hat{\pi}(\mathbf{y},t),                                                                                       \\
                                        & \qquad \left[ \vert \nabla_{\mathbf{y}} \hat{\psi}(\mathbf{y},t) \vert^2,\,\hat{\psi}(\mathbf{x},t)\right] = 2 \nabla_{\mathbf{y}}\hat{\psi}(\mathbf{y},t) \nabla_{\mathbf{y}}\left[\hat{\psi}(\mathbf{y},t) ,\,\hat{\psi}(\mathbf{x},t)\right] = 0,                                                                  \\
                                        & \qquad \left[ \hat{\psi}^2(\mathbf{y},t),\,\hat{\psi}(\mathbf{x}, t) \right] = 2 \hat{\psi}(\mathbf{y},t)\left[ \hat{\psi}(\mathbf{y},t),\,\hat{\psi}(\mathbf{x}, t) \right] =  0,                                                                                                                                    \\
                                        & = \frac{i}{2} \int \mathrm{d}^3 \mathbf{y} \, (-2i) \delta^{(3)}(\mathbf{x}-\mathbf{y}) \hat{\pi}(\mathbf{y},t) = \int \mathrm{d}^3 \mathbf{y} \, \delta^{(3)}(\mathbf{x}-\mathbf{y}) \hat{\pi}(\mathbf{y},t) = \hat{\pi}(\mathbf{x}, t).
    \end{aligned}
\]
where we have used the commutator of a product expression \([AB,\,C] = A[B,\,C]+[A,\,C]B\) and we were able to take the spatial derivative out of the commutator since it was cating on functions of \(\mathbf{y}\) and not of \(\mathbf{x}\). We found that \(\ddt \hat{\psi} (\mathbf{x}, t) = \hat{\pi}(\mathbf{x}, t)\) as expected, and similarly we can compute the time derivative of \(\hat{\pi}(\mathbf{x}, t)\):
\[
    \begin{aligned}
        \ddt \hat{\pi} (\mathbf{x}, t) & = i [\hat{H}(t),\,\hat{\pi}(\mathbf{x}, t)] = \frac{i}{2} \left[\int \mathrm{d}^3 \mathbf{y} \, \left( \hat{\pi}^2(\mathbf{y},t) + \vert \nabla_{\mathbf{y}}  \hat{\psi}(\mathbf{y},t) \vert^2 + m^2 \hat{\psi}^2(\mathbf{y},t) \right),\,\hat{\pi}(\mathbf{x}, t)\right]                                                                               \\
                                       & = \frac{i}{2} \int \mathrm{d}^3 \mathbf{y} \, \left\{ \left[ \hat{\pi}^2(\mathbf{y},t),\,\hat{\pi}(\mathbf{x}, t) \right] + \left[ \vert \nabla_{\mathbf{y}} \hat{\psi}(\mathbf{y},t) \vert^2,\,\hat{\pi}(\mathbf{x},t)\right] + m^2 \left[ \hat{\psi}^2(\mathbf{y},t),\,\hat{\pi}(\mathbf{x}, t) \right] \right\}                                      \\
                                       & \qquad \left[ \hat{\pi}^2(\mathbf{y},t),\,\hat{\pi}(\mathbf{x}, t) \right] = 2\hat{\pi}(\mathbf{y},t)\left[ \hat{\pi}(\mathbf{y},t),\,\hat{\pi}(\mathbf{x}, t) \right] = 0,                                                                                                                                                                             \\
                                       & \qquad \left[ \vert \nabla_{\mathbf{y}} \hat{\psi}(\mathbf{y},t) \vert^2,\,\hat{\pi}(\mathbf{x},t)\right] = 2 \nabla_{\mathbf{y}}\hat{\psi}(\mathbf{y},t) \nabla_{\mathbf{y}}\left[\hat{\psi}(\mathbf{y},t) ,\,\hat{\pi}(\mathbf{x},t)\right] = 2i \nabla_{\mathbf{y}}\hat{\psi}(\mathbf{y},t) \nabla_{\mathbf{y}} \delta^{(3)}(\mathbf{x}-\mathbf{y}), \\
                                       & \qquad \left[ \hat{\psi}^2(\mathbf{y},t),\,\hat{\pi}(\mathbf{x}, t) \right] = 2 \hat{\psi}(\mathbf{y},t)\left[ \hat{\psi}(\mathbf{y},t),\,\hat{\pi}(\mathbf{x}, t) \right] = 2i\hat{\psi}(\mathbf{y},t)\delta^{(3)}(\mathbf{x}-\mathbf{y}),                                                                                                             \\
                                       & = \frac{i}{2} \int \mathrm{d}^3 \mathbf{y} \, \left\{ 2i \nabla_{\mathbf{y}}\hat{\psi}(\mathbf{y},t) \nabla_{\mathbf{y}} \delta^{(3)}(\mathbf{x}-\mathbf{y}) + 2i m^2 \hat{\psi}(\mathbf{y},t)\delta^{(3)}(\mathbf{x}-\mathbf{y}) \right\}                                                                                                              \\
                                       & = - \int \mathrm{d}^3 \mathbf{y} \, \left\{ - \nabla_{\mathbf{y}}^2 \hat{\psi}(\mathbf{y},t) + m^2 \hat{\psi}(\mathbf{y},t) \right\} \delta^{(3)}(\mathbf{x}-\mathbf{y}) = \nabla_{\mathbf{x}}^2 \hat{\psi}(\mathbf{x},t) - m^2 \hat{\psi}(\mathbf{x},t),                                                                                               \\
    \end{aligned}
\]
where we find \(\ddt \hat{\pi} (\mathbf{x}, t) = (\nabla^2 - m^2) \hat{\psi}(\mathbf{x}, t)\). Combining these two results, we find that the field operator \(\hat{\psi}(\mathbf{x}, t)\) satisfies the Klein-Gordon equation in the Heisenberg picture:
\[
    (\partial_t^2 - \nabla^2 + m^2) \hat{\psi}(\mathbf{x}, t) = 0, \quad \text{or equivalently} \quad (\partial_{\mu} \partial^{\mu} + m^2) \hat{\psi}(x) = 0.
\]
Thus the field operators in the Heisenberg picture evolve according to the same equations of motion (KG equation) as the Schrödinger picture operators, ensuring consistency between the two quantum descriptions.

\paragraph{Ladder operators in Heisemberg picture.} Let us now write the field operator in the Heisenberg picture explicitly, by Fourier expanding it in terms of creation and annihilation operators: starting from the Schrödinger picture expression
\[
    \hat{\psi} (\mathbf{x}) = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{\sqrt{2\omega_{\mathbf{p}}}} \left[ \hat{a}_{\mathbf{p}} e^{i \mathbf{p} \cdot \mathbf{x}} + \hat{a}^{\dagger}_{\mathbf{p}} e^{-i \mathbf{p} \cdot \mathbf{x}} \right],
\]
which is clearly time independent, due to the definition of the ladder operators. We can promote it to the Heisenberg picture by finding the time-dependent definition of the ladder operators:
\[
    \left(\hat{a}_{\mathbf{p}}\right)_H = e^{i \hat{H} t} (\hat{a}_{\mathbf{p}})_S e^{-i \hat{H} t}, \quad \left(\hat{a}^{\dagger}_{\mathbf{p}}\right)_H = e^{i \hat{H} t} (\hat{a}^{\dagger}_{\mathbf{p}})_S e^{-i \hat{H} t}.
\]
If we recall the commutators between the ladder operators and the Hamiltonian, we can compute:\footnote{Since \(\hat{H}\ket{0} = 0 = \hat{H} \hat{a}_{\mathbf{p}}\ket{\mathbf{p}} = \left([\hat{H} ,\, \hat{a}_{\mathbf{p}}] + \hat{a}_{\mathbf{p}}\hat{H}\right)\ket{\mathbf{p}}\) leads to \([\hat{H},\, \hat{a}_{\mathbf{p}}]\ket{\mathbf{p}} = -\hat{a}_{\mathbf{p}}\hat{H} \ket{\mathbf{p}} = -\hat{a}_{\mathbf{p}} \omega_{\mathbf{p}} \ket{\mathbf{p}}\), and similarly for the creation operator \(\hat{H} \hat{a}^{\dagger}_{\mathbf{p}} \ket{0} = \left([\hat{H},\,\hat{a}^{\dagger}_{\mathbf{p}}] + \hat{a}^{\dagger}_{\mathbf{p}} \hat{H} \right) \ket{0}\) leads to \([\hat{H},\,\hat{a}^{\dagger}_{\mathbf{p}}] \ket{0} = \hat{H} \hat{a}^{\dagger}_{\mathbf{p}} \ket{0} = \omega_{\mathbf{p}} \hat{a}^{\dagger}_{\mathbf{p}} \ket{0}\).}
\[
    [\hat{H},\, \hat{a}_{\mathbf{p}}] = - \omega_{\mathbf{p}} \hat{a}_{\mathbf{p}}, \quad [\hat{H},\, \hat{a}^{\dagger}_{\mathbf{p}}] = + \omega_{\mathbf{p}} \hat{a}^{\dagger}_{\mathbf{p}},
\]
thus if we apply the Hamiltonian multiple times we get:
\[
    \begin{aligned}
        \hat{H} \hat{a}_{\mathbf{p}}   & = [\hat{H},\, \hat{a}_{\mathbf{p}}] + \hat{a}_{\mathbf{p}} \hat{H} = \hat{a}_{\mathbf{p}}\left(\hat{H} - \omega_{\mathbf{p}}\right),         \\
        \hat{H}^2 \hat{a}_{\mathbf{p}} & = \hat{H} \hat{a}_{\mathbf{p}} \left(\hat{H} - \omega_{\mathbf{p}}\right)= \hat{a}_{\mathbf{p}}\left(\hat{H} - \omega_{\mathbf{p}}\right)^2, \\
        \vdots                         &                                                                                                                                              \\
        \hat{H}^n \hat{a}_{\mathbf{p}} & = \hat{a}_{\mathbf{p}}\left(\hat{H} - \omega_{\mathbf{p}}\right)^n.
    \end{aligned}
\]
Thus if we now expand the exponentials in the definition of the Heisenberg picture ladder operators, we find:
\[
    \begin{aligned}
        e^{i \hat{H} t} \hat{a}_{\mathbf{p}} & = \sum_{n} \frac{(i \hat{H} t)^n}{n!} \hat{a}_{\mathbf{p}} = \sum_{n} \frac{(i t)^n}{n!} \hat{H}^n \hat{a}_{\mathbf{p}} = \sum_{n} \frac{(i t)^n}{n!} \hat{a}_{\mathbf{p}} \left(\hat{H} - \omega_{\mathbf{p}}\right)^n \\
                                             & = \hat{a}_{\mathbf{p}} \sum_{n} \frac{(it)^n}{n!}(\hat{H} - \omega_{\mathbf{p}})^n = \hat{a}_{\mathbf{p}} e^{i (\hat{H} - \omega_{\mathbf{p}}) t}                                                                       \\
                                             & = e^{-i \omega_{\mathbf{p}} t} \hat{a}_{\mathbf{p}} e^{i \hat{H} t}.
    \end{aligned}
\]
If we now plug this result back into the definition of the Heisenberg picture ladder operator, we find:
\[
    \left(\hat{a}_{\mathbf{p}}\right)_H = e^{-i \omega_{\mathbf{p}} t} \hat{a}_{\mathbf{p}} e^{-i \hat{H} t} e^{i \hat{H} t} = e^{-i \omega_{\mathbf{p}} t} \hat{a}_{\mathbf{p}},
\]
and similarly for the creation operator, so that
\begin{equation}
    \begin{dcases}
        \left(\hat{a}_{\mathbf{p}}\right)_H = e^{-i \omega_{\mathbf{p}} t} \hat{a}_{\mathbf{p}}, \\
        \left(\hat{a}^{\dagger}_{\mathbf{p}}\right)_H = e^{i \omega_{\mathbf{p}} t} \hat{a}^{\dagger}_{\mathbf{p}}.
    \end{dcases}
    \label{eq:ladder_operators_heisenberg}
\end{equation}

Thus, substituting these expressions, the field operator in the Heisenberg picture is given by:
\[
    \hat{\psi} (\mathbf{x}, t) = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{\sqrt{2\omega_{\mathbf{p}}}} \left[ \hat{a}_{\mathbf{p}} e^{-i \omega_{\mathbf{p}} t} e^{i \mathbf{p} \cdot \mathbf{x}} + \hat{a}^{\dagger}_{\mathbf{p}} e^{i \omega_{\mathbf{p}} t} e^{-i \mathbf{p} \cdot \mathbf{x}} \right].
\]

But is this lorentz invariant? Yes, since we can notice how the measure can be treated as done in section \ref{sec:KG_lorentz_invariance} without complications and the contraction of the lorentz scalar \(p_{\mu}x^{\mu}\) can be exploited to make the invariance explicit:
\[
    p_\mu x^{\mu} = p_0 x^0 - \mathbf{p} \cdot \mathbf{x} = \omega_{\mathbf{p}} t - \mathbf{p} \cdot \mathbf{x},
\]
so that we can rewrite the field operator as:
\[
    \hat{\psi} (x) = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{\sqrt{2\omega_{\mathbf{p}}}} \left[ \hat{a}_{\mathbf{p}} e^{-i p_{\mu} x^{\mu}} + \hat{a}^{\dagger}_{\mathbf{p}} e^{i p_{\mu} x^{\mu}} \right],
\]
and similarly for \(\hat{\pi}(x)\):
\[
    \hat{\pi} (x) = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} (-i) \sqrt{\frac{\omega_{\mathbf{p}}}{2}} \left[ \hat{a}_{\mathbf{p}} e^{-i p_{\mu} x^{\mu}} - \hat{a}^{\dagger}_{\mathbf{p}} e^{i p_{\mu} x^{\mu}} \right].
\]
This expression is manifestly Lorentz invariant, as it depends only on the scalar product \(p_{\mu} x^{\mu}\).

\subsection{Causality}

We are getting closer to a manifestly Lorentz invariant KG theory, but we still have to check if causality is preserved. The Heisemberg picture equal-time commutation relations ensure that operators at spacelike-separated points commute, preserving causality. However, we need to verify this explicitly for our field operators in generic time and space coordinates: we have to understand how observables at different spacetime points relate to each other with arbitrary time commutation relations.

We already know that at equal times the commutator is zero for different points:
\begin{figure}[H]
    \centering
    \begin{minipage}{0.5\textwidth}
        \centering
        \begin{tikzpicture}[scale=2]
            % Shaded regions (light cone)
            \fill[blue!10] (-1.2,1.2) -- (1.2,1.2) -- (0,0) -- cycle; % future
            \fill[blue!10] (-1.2,-1.2) -- (1.2,-1.2) -- (0,0) -- cycle; % past

            % Axes
            \draw[->] (0,-1.5) -- (0,1.5) node[above] {$ct$};
            \draw[->] (-1.5,0) -- (1.5,0) node[right] {$x$};

            % Light cone lines
            \draw[thick,orange] (-1.2,-1.2) -- (1.2,1.2);
            \draw[thick,orange] (1.2,-1.2) -- (-1.2,1.2);

            % Labels
            \node[above right] at (0.0,0.0) {$\mathbf{x}$};
            \node[right] at (0.4,-0.8) {$\mathbf{y}$};
            \node[right] at (0.8,0.4) {$\mathbf{z}$};
            \node[left] at (0,1.3) {Future};
            \node[left] at (0,-1.3) {Past};
            \node[red] at (0,0.6) {Time-like};
            \node[blue] at (-1.0,-0.4) {Space-like};
            \node[orange] at (1.15,1.05) {Light-like};

            % Vector arrows
            \draw[->,red,thick] (0,0) -- (0.4,-0.8) node[midway,right] {$|\mathbf{y}-\mathbf{x}| < ct$};
            \draw[->,blue, thick] (0,0) -- (0.8,0.4) node[midway,right] {$|\mathbf{z}-\mathbf{x}| > ct$};
        \end{tikzpicture}
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\textwidth}
        \[
            \left[\hat{O}_1(\mathbf{x}, t),\, \hat{O}_2(\mathbf{z}, t)\right] = 0, \quad \mathbf{x} \neq \mathbf{z},
        \]
        since it is a spacelike separation \((x_\mu - z_\mu)(x^{\mu}-z^{\mu}) < 0\): a measurement at \(\mathbf{x}\) cannot influence a measurement at \(\mathbf{z}\) if they are not causally connected.

        If we recall the Heisenberg uncertainty principle, we know that two observables \(\hat{O}_1\) and \(\hat{O}_2\) can be measured simultaneously with arbitrary precision if they commute:
        \[
            \Delta O_1 \Delta O_2 \geq \frac{1}{2} \left| \langle \left[\hat{O}_1,\, \hat{O}_2\right] \rangle \right|.
        \]
    \end{minipage}
\end{figure}
If two quantities commute, they can be measured simultaneously with arbitrary precision, meaning that a measurement of one does not disturb the other. This is crucial for preserving causality in quantum field theory, as it ensures that measurements at spacelike-separated points do not influence each other. We have to check if our theory respects this prescriptions.

To answer these questions, we have to compute the commutator between two field operators at different spacetime points: let us define the \textbf{Klein-Gordon propagator} as
\[
    \Delta(x-y) = \left[\hat{\psi}(x),\, \hat{\psi}(y)\right],
\]
where \(x = (x_0,\, \mathbf{x})\) and \(y = (y_0,\, \mathbf{y})\) are two generic spacetime points. We have to check three things:
\begin{enumerate}
    \item \(\Delta(x-y)\) is Lorentz invariant;
    \item \(\Delta(x-y) \neq 0\) for \((x-y)^2 > 0\) (timelike separation);
    \item \(\Delta(x-y) = 0\) for \((x-y)^2 < 0\) (spacelike separation).
\end{enumerate}
Let us first compute the propagator, which phisically describes the amplitude for a particle created at point \(y\) to be annihilated at point \(x\):
\[
    \begin{aligned}
        \Delta(x-y) & = \left[\hat{\psi}(x),\, \hat{\psi}(y)\right] = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{\sqrt{2\omega_{\mathbf{p}}}} \int \frac{\mathrm{d}^3 \mathbf{q}}{(2\pi)^3} \frac{1}{\sqrt{2\omega_{\mathbf{q}}}}                                                                                                                                                 \\
                    & \quad \times \left[ \hat{a}_{\mathbf{p}} e^{-i p_{\mu} x^{\mu}} + \hat{a}^{\dagger}_{\mathbf{p}} e^{i p_{\mu} x^{\mu}},\, \hat{a}_{\mathbf{q}} e^{-i q_{\mu} y^{\mu}} + \hat{a}^{\dagger}_{\mathbf{q}} e^{i q_{\mu} y^{\mu}} \right]                                                                                                                                    \\
                    & = \int \frac{\mathrm{d}^3 \mathbf{p}\mathrm{d}^3 \mathbf{q}}{(2\pi)^6} \frac{1}{2\sqrt{\omega_{\mathbf{p}} \omega_{\mathbf{q}}}} \left\{ [\hat{a}_\mathbf{p} ,\, \hat{a}^{\dagger}_\mathbf{q}]\left( e^{-i(p_{\mu}x^{\mu} - q_{\mu}y^{\mu})}\right) + [\hat{a}^{\dagger}_\mathbf{p} ,\, \hat{a}_\mathbf{q}]\left( e^{i(p_{\mu}x^{\mu} - q_{\mu}y^{\mu})}\right)\right\} \\
                    & = \int \frac{\mathrm{d}^3 \mathbf{p}\mathrm{d}^3 \mathbf{q}}{(2\pi)^3} \frac{1}{2\sqrt{\omega_{\mathbf{p}} \omega_{\mathbf{q}}}} \delta^{(3)}(\mathbf{p}-\mathbf{q}) \left(e^{-i(p_{\mu}x^{\mu} - q_{\mu}y^{\mu})} - e^{i(p_{\mu}x^{\mu} - q_{\mu}y^{\mu})}\right),
    \end{aligned}
\]
thus integrating over \(\mathbf{q}\) we get the final expression for the KG propagator:
\begin{equation}
    \Delta(x-y) = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2E_{\mathbf{p}}} \left( e^{-i p_{\mu} (x^{\mu}-y^{\mu})} - e^{i p_{\mu} (x^{\mu}-y^{\mu})} \right),
    \label{eq:KG_propagator}
\end{equation}
Now we can check the three considerations:
\begin{enumerate}
    \item \textbf{Lorentz invariance}: the exponentials \(e^{\pm i p_{\mu} (x^{\mu}-y^{\mu})}\) are manifestly Lorentz invariant since they depend on the contraction of two four-vectors; the measure \(\mathrm{d}^3 \mathbf{p}/(2\pi)^3 2E_{\mathbf{p}}\) is Lorentz invariant, as we have previously shown in section \ref{sec:KG_lorentz_invariance}; thus the whole expression is Lorentz invariant. This means that if we compute \(\Delta(x-y)\) in a reference frame where \(x\) and \(y\) are simultaneous, the result will hold for any other spacetime events which is related to \(y\) by a Lorentz transformation. But since we cannot relate events inside and outside the light cone with a Lorentz transformation, we can chack that the commutator vanishes for only one value of \(y\) outside of \(x\) light-cone, then it will be true for events throughout the whole region.
    \item \textbf{Timelike separation}: \(\Delta(x-y) \neq 0\). Let us consider the case where \(x\) and \(y\) are separated only in time, i.e. \(\mathbf{x} = \mathbf{y}\) and \(t_x \neq t_y\), thus \((x-y)^2 > 0\). We want to prove, in the easiest case where \(x = (t,\, \mathbf{0})\) and \(y=(0, \mathbf{0})\), that the commutator do not vanish:
          \[
              \Delta(x-y) = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2E_{\mathbf{p}}} \left( e^{-i E_{\mathbf{p}} t} - e^{i E_{\mathbf{p}} t} \right).
          \]
          If we move to spherical coordinates in momentum space, we get:
          \[
              \Delta(x-y) = \frac{1}{4\pi^2} \int_0^{\infty} \mathrm{d}\vert \mathbf{p} \vert \frac{\vert \mathbf{p} \vert^2}{\sqrt{\vert \mathbf{p} \vert^2 + m^2}} \left( e^{-i \sqrt{\vert \mathbf{p} \vert^2 + m^2} t} - e^{i \sqrt{\vert \mathbf{p} \vert^2 + m^2} t} \right).
          \]
          Now we can perform a change of variable from \(\vert \mathbf{p} \vert\) to \(E_{\mathbf{p}} = \sqrt{\vert \mathbf{p} \vert^2 + m^2}\), so that \(\mathrm{d}\vert \mathbf{p} \vert = \frac{E_{\mathbf{p}}}{\sqrt{E^2_{\mathbf{p}} - m^2}} \mathrm{d}E_{\mathbf{p}}\), thus we get:
          \[
              \mathrm{d}\vert \mathbf{p} \vert \vert \mathbf{p} \vert^2 = E_{\mathbf{p}} \sqrt{E^2_{\mathbf{p}} - m^2} \mathrm{d} E_{\mathbf{p}},
          \]
          and the integral becomes
          \[
              \Delta(x-y) = \frac{1}{4\pi^2} \int_m^{\infty} \mathrm{d}E_{\mathbf{p}} \sqrt{E^2_{\mathbf{p}} - m^2} \left( e^{-i E_{\mathbf{p}} t} - e^{i E_{\mathbf{p}} t} \right).
          \]
          The solution of this integral can be computed through \textit{Bessel functions}, such that the two contributions can be computed separately:
          \[
              \Delta(x-y) = \frac{1}{4\pi^2} \int \mathrm{d}E_{\mathbf{p}} \sqrt{E^2_{\mathbf{p}} - m^2} e^{-i E_{\mathbf{p}} t} = \frac{m}{8\pi t} \left(Y_1(mt) + i J_1(mt)\right)
          \]
          where \(Y_1\) is a Bessel function of the II kind while \(J_1\) is of the I kind. Now let's take a look at the asymptotic behaviour:
          \[
              \begin{aligned}
                  J_1(x) & \xrightarrow{x \to \infty} \sqrt{\frac{2}{\pi x}} \cos x, \\
                  Y_1(x) & \xrightarrow{x \to \infty} \sqrt{\frac{2}{\pi x}} \sin x.
              \end{aligned}
          \]
          thus when we take \(t \to \infty\) we get something like \(\sin x + i\cos x\)\footnote{computed with exponentials it becomes \(\sin x + i\cos x = \frac{1}{2}(-i(e^{ix} - e^{-ix}) + i(e^{ix} + e^{-ix})) = ie^{-ix}\).} so we get
          \[
              Y_1(mt) + i {J_1}(mt) \xrightarrow{t \to \infty} i \sqrt{\frac{2}{\pi m t}}e^{-imt},
          \]
          so that
          \[
              \Delta(x-y) = \frac{1}{4\pi^2} \int_m^{\infty} \mathrm{d}E_{\mathbf{p}} \sqrt{E^2_{\mathbf{p}} - m^2} \left( e^{-i E_{\mathbf{p}} t} - e^{i E_{\mathbf{p}} t} \right) \xrightarrow{t \to \infty} \left(e^{-imt} - e^{imt}\right) \neq 0.
          \]
    \item \textbf{Spacelike separation}: \(\Delta(x-y) = 0\). Let us now consider the case where \(x\) and \(y\) are separated only in space, i.e. \(t_x = t_y\) and \(\mathbf{x} \neq \mathbf{y}\), thus \((x-y)^2 < 0\). We want to prove, in the easiest case where \(x = (t,\, \mathbf{x})\) and \(y=(t, \mathbf{y})\), that the commutator vanishes:
          \[
              \begin{aligned}
                  \Delta(x-y) & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2\omega_{\mathbf{p}}} \left( e^{-i p_{\mu} (x^{\mu}-y^{\mu})} - e^{i p_{\mu}(x^{\mu}-y^{\mu})} \right)                                                                                              \\
                              & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2\omega_{\mathbf{p}}} e^{-i \mathbf{p} \cdot (\mathbf{x}-\mathbf{y})} - \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2\omega_{\mathbf{p}}} e^{i \mathbf{p} \cdot (\mathbf{x}-\mathbf{y})} \\
                              & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2\omega_{\mathbf{p}}} \left( e^{-i \mathbf{p} \cdot (\mathbf{x}-\mathbf{y})} - e^{i (-\mathbf{p}) \cdot (\mathbf{x}-\mathbf{y})} \right) = 0,
              \end{aligned}
          \]
          since \(x_0 = y_0 = t\), only the space variables survive in the computation, and the sum of the last two integrals (performing a change of variable from \(\mathbf{p}\) to \(-\mathbf{p}\) on the second integral) we are left with two identical terms subtracted to each other, so we get \(0\). Since this guy is Lorentz invariant, we found this result true for any \((x-y)^2 = - (x-y)^2 < 0\), since the time can be different in \(x\) and \(y\), but we are speaking of spacelike vectors (as we said, we can generalize via Lorentz transformations).
\end{enumerate}

We have proven that KG theory mathematically preserve causality (remember that in RQMPI we looked at how there was a non zero probability of finding a particle propagating at \(v>c\)), let's check this instance phisically: the probability of finding a particle at \(v>c\) should be null.

\subsection{Klein Gordon Correlators}

Let us consider  particle at a spectime point \(y = (t,\,\mathbf{y})\); how do we describe it in QFT? It is an exhited state of the vacuum \(\ket{0}\), i.e. there is some kind of exhitation localized in our quantum field at the point \(y\), like a localized and quantized wave; we recreate it with a creation operator, like \(\hat a_{\mathbf{p}} \ket{0}\), but if we create a particle with definite momentum we could not possibly now its position, so we imagine a linear combination of all possible creation operators with all possible momenta: we apply the \textbf{field operator} on the vacuum
\[
    \hat \psi(y) \ket{0}.
\]
Then let's look at the probability amplitude (with a scalar product) to find it in \(x = (t,\mathbf{x})\):
\[
    D(x-y) = \bra{0} \hat \psi (x) \hat \psi (y) \ket{0}
\]
Note that it is different from RQM, where we computed \(\bra{\mathbf{x}} e^{-i \hat H t} \ket{\mathbf{y}}\) with \(\hat H = \sqrt{\vert \mathbf{p} \vert^2 + m^2}\). Lets compute the amplitude:
\[
    \begin{aligned}
        D(x-y) & = \bra{0} \hat \psi (x) \hat \psi (y) \ket{0} = \left(\hat{\psi} (x) \ket{0}\right)^{\dagger} \hat{\psi} (y) \ket{0} \qquad \left[ \text{ KG scalar field: } \hat{\psi}^\dagger  (x)= \hat{\psi} (x) \right],                                                                                                                                                                          \\
               & = \int \frac{\mathrm{d}^3 \mathbf{p}\mathrm{d}^3 \mathbf{q}}{(2\pi)^6} \frac{1}{2\sqrt{\omega_{\mathbf{p}}\omega_{\mathbf{q}}}}\, \bra{0} \left( \hat{a}_{\mathbf{p}} e^{-i p_{\mu} x^{\mu}} + \hat{a}^{\dagger}_{\mathbf{p}} e^{i p_{\mu} x^{\mu}} \right) \left(  \hat{a}_{\mathbf{q}} e^{-i q_{\mu} y^{\mu}} + \hat{a}^{\dagger}_{\mathbf{q}} e^{i q_{\mu} y^{\mu}} \right) \ket{0} \\
               & \qquad \bra{0} \hat{a}_{\mathbf{p}} \hat{a}_{\mathbf{q}} \ket{0} = 0, \quad \bra{0} \hat{a}_{\mathbf{p}} \hat{a}^{\dagger}_{\mathbf{q}} \ket{0} \neq 0, \quad \bra{0} \hat{a}^{\dagger}_{\mathbf{p}} \hat{a}_{\mathbf{q}} \ket{0} = 0, \quad  \bra{0} \hat{a}^{\dagger}_{\mathbf{p}} \hat{a}^{\dagger}_{\mathbf{q}} \ket{0} = 0,                                                       \\
               & = \int \frac{\mathrm{d}^3 \mathbf{p}\mathrm{d}^3 \mathbf{q}}{(2\pi)^6} \frac{1}{2\sqrt{\omega_{\mathbf{p}} \omega_{\mathbf{q}}}} \bra{0} \hat{a}_{\mathbf{p}} \hat{a}^{\dagger}_{\mathbf{q}} \ket{0} e^{-i p_{\mu} x^{\mu}} e^{i q_{\mu} y^{\mu}}                                                                                                                                      \\
               & = \int \frac{\mathrm{d}^3 \mathbf{p}\mathrm{d}^3 \mathbf{q}}{(2\pi)^6} \frac{1}{2\sqrt{\omega_{\mathbf{p}} \omega_{\mathbf{q}}}} \left( \bra{0} \left[\hat{a}_{\mathbf{p}} ,\, \hat{a}^{\dagger}_{\mathbf{q}}\right] \ket{0} + \bra{0} \hat{a}^{\dagger}_{\mathbf{q}} \hat{a}_{\mathbf{p}} \ket{0} \right) e^{-i p_{\mu} x^{\mu}} e^{i q_{\mu} y^{\mu}}                                \\
               & = \int \frac{\mathrm{d}^3 \mathbf{p}\mathrm{d}^3 \mathbf{q}}{(2\pi)^3} \frac{1}{2\sqrt{\omega_{\mathbf{p}} \omega_{\mathbf{q}}}} \delta^{(3)}(\mathbf{p}-\mathbf{q}) e^{-i p_{\mu} x^{\mu}} e^{i q_{\mu} y^{\mu}} = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2\omega_{\mathbf{p}}} e^{-i p_{\mu} (x^{\mu}-y^{\mu})},
    \end{aligned}
\]
where we have used the fact that \(\hat a_{\mathbf{q}}\) acting on the vacuum \(\ket{0}\) is zero, which is the same to the application of \(\hat a^{\dagger}_{\mathbf{q}}\) on \(\bra{0}\) (it is only the conjugate of the previous expression); furthermore, when we see a product of operators, the idea is to use commutators \(\hat a_{\mathbf{p}} \hat a^{\dagger}_{\mathbf{q}} = \left[\hat a_{\mathbf{p}}\, ,\, \hat a^{\dagger}_{\mathbf{q}}\right] + \hat a^{\dagger}_{\mathbf{q}} \hat a_{\mathbf{p}}\) to simplify the expression, since the commutator is known while the second term acting on the vacuum is zero.

Thus we have found that this amplitude, the KG correlator, is proportional to the KG propagator in \eqref{eq:KG_propagator} (called like that since the square modulus of this amplitude gives us the probability of the propagation of the particle from \(\mathbf{y}\) to \(\mathbf{x}\)):
\begin{equation}
    D(x-y) = \bra{0} \hat \psi (x) \hat \psi (y) \ket{0} = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2\omega_{\mathbf{p}}} e^{-i p_{\mu} (x^{\mu}-y^{\mu})},
    \label{eq:KG_correlator}
\end{equation}
which, as we have seen before, is Lorentz invariant.

If we now evaluate this amplitude for propagations outside the light cone (among spacelike separated events \(x\) and \(y\), happening at the same time in different places: \(x-y = (0, \mathbf{r})\), and \(r = \vert \mathbf{r} \vert\)) it should be zero to preserve causality: using spherical coordinates in momentum space with the polar axis along \(\mathbf{r}\) we have
\[
    \begin{aligned}
        D(x-y) & = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2\omega_{\mathbf{p}}} e^{-i p_{\mu} (x^{\mu}-y^{\mu})} = \int \frac{\mathrm{d}^3 \mathbf{p}}{(2\pi)^3} \frac{1}{2\omega_{\mathbf{p}}} e^{-i \mathbf{p} \cdot \mathbf{r}} \\
               & = \frac{2\pi}{(2\pi)^3} \int_0^{\infty} \mathrm{d} \vert \mathbf{p} \vert \frac{\vert \mathbf{p} \vert^2}{2E_{\mathbf{p}}} \int_{-1}^{1} \mathrm{d}(\cos \theta) e^{-i \vert \mathbf{p} \vert r \cos \theta},                     \\
    \end{aligned}
\]
since \(\mathrm{d}^3 \mathbf{p} = 2\pi \vert \mathbf{p} \vert^2 \mathrm{d} \vert \mathbf{p} \vert \mathrm{d}(\cos \theta)\), and by computing the integral in \(\mathrm{d}(\cos \theta)\) we get to
\[
    \begin{aligned}
        D(x-y) & = \frac{-1}{(2\pi)^2} \int_0^{\infty} \mathrm{d} \vert \mathbf{p} \vert \frac{\vert \mathbf{p} \vert^2}{2E_{\mathbf{p}}} \left[\frac{e^{i \vert \mathbf{p} \vert r }-e^{-i \vert \mathbf{p} \vert r }}{-i \vert \mathbf{p} \vert r} \right]                                            \\
               & = -\frac{i}{2(2\pi)^2 r} \left( \int_0^{\infty} \mathrm{d} \vert \mathbf{p} \vert\, \frac{\vert \mathbf{p} \vert }{E_{\mathbf{p}} }e^{i \mathbf{p} r} - \int_0^{\infty} \mathrm{d} \vert \mathbf{p} \vert\, \frac{\vert \mathbf{p} \vert }{E_{\mathbf{p}}}e^{-i \mathbf{p} r} \right),
    \end{aligned}
\]
with \(E_{\mathbf{p}} = \sqrt{\vert \mathbf{p} \vert^2 + m^2}\). Notice how the two integrals are identical except for the sign in the exponential, so we can combine them into a single integral from \(-\infty\) to \(\infty\) of a single exponential term:
\[
    D(x-y) = -\frac{i}{2(2\pi)^2 r} \left( \int_{-\infty}^{\infty} \mathrm{d} \vert \mathbf{p} \vert \frac{\vert \mathbf{p} \vert }{E_{\mathbf{p}} }e^{i \mathbf{p} r} \right).
\]
\begin{figure}[H]
    \centering
    \begin{minipage}{0.45\textwidth}
        \centering
        \begin{tikzpicture}[scale=1.2]
            \draw[->] (-2.2,0) -- (2.2,0) node[right] {$\Re(p)$};
            \draw[->] (0,-2.2) -- (0,2.2) node[above] {$\Im(p)$};

            \draw[thick,green!70!black] (0,0) circle (1.5);

            \fill[orange!90!black] (0.0,0.8) circle (2pt) node[right] {$im$};
            \fill[orange!90!black] (0.0,-0.8) circle (2pt) node[right] {$-im$};

            \foreach \x in {1.0,1.2,1.4,1.6,1.8,2.0}{
                    \node[orange!90!black] at (0,\x) {$\ast$};
                    \node[orange!90!black] at (0,-\x) {$\ast$};
                }
        \end{tikzpicture}
    \end{minipage}
    \hfill
    \begin{minipage}{0.5\textwidth}
        The idea is now to promote \(\vert \mathbf{p} \vert\) to a complex variable and perform the integral with Cauchy theorem; the branch cuts are as shown in figure, and we recognize them to be the same as we have seen in section \ref{sec:RQM_framework}, having a complex square root. We want to get the integral on the real axis, so we compute the path as an integral from \(-L\) to \(L\) on \(\mathbb{R}\) and then we take \(L \to \infty\), then we look at the contributions from the rest of the closed path (excluding the singularities) and put their sum to zero.
    \end{minipage}
\end{figure}

\begin{figure}[H]
    \centering
    \begin{minipage}{0.5\textwidth}
        We have then to compute the integrals on the imaginary axis, with \(\vert \mathbf{p} \vert = i y\) (such that \(\vert \mathbf{p} \vert \mathrm{d} \vert \mathbf{p} \vert = -y \mathrm{d} y\) and \(\sqrt{-y^2 + m^2} = \sqrt{-1}\sqrt{y^2 - m^2} = i \sqrt{y^2 - m^2}\)), since all the other integrals on the path are null, such that
        \[
            D(x-y) = \frac{1}{2 (2\pi)^2 r} \int_{m}^{\infty} \mathrm{d}y \, \frac{y e^{-yr}}{\sqrt{y^{2}-m^2}}.
        \]
        Now this integral is all real without problems, but is it zero?
    \end{minipage}
    \hfill
    \begin{minipage}{0.45\textwidth}
        \centering
        \begin{tikzpicture}[scale=1.1]

            \draw[->] (-2.3,0) -- (2.3,0) node[right] {$\Re(p)$};
            \draw[->] (0,-0.5) -- (0,2.5) node[above] {$\Im(p)$};

            \foreach \y in {1.0,1.2,1.4,1.6,1.8,2.0, 2.2}{
                    \node[red!80!black] at (0,\y) {$\ast$};
                }

            \draw[thick,red!80!black,<-] (0.2,0.8) arc[start angle=0,end angle=360,radius=0.2] node[right] {$C_{\epsilon}$};

            \draw[thick,->,green!70!black] (-2.2,0) -- (-1,0);
            \draw[thick,->,green!70!black] (-1,0) -- (1,0) node[below] {$C_L$};
            \draw[thick,green!70!black] (1,0) -- (2.2,0);

            \draw[thick,orange!90!black,
                postaction={decorate},
                decoration={markings, mark=at position 0.5 with {\arrow{<}}}
            ] (-2.2,0) arc[start angle=180,end angle=90,radius=2.2] node[above right] {$C_1$};

            \draw[thick,orange!90!black,
                postaction={decorate},
                decoration={markings, mark=at position 0.5 with {\arrow{>}}}
            ] (2.2,0) arc[start angle=0,end angle=90,radius=2.2] node[above left] {$C_4$};

            \draw[thick,->,blue!80] (0.1,2.2) -- (0.1,1.0) node[above right] {$C_2$};
            \draw[thick,<-,blue!80] (-0.1,2.2) -- (-0.1,1.0) node[above left] {$C_3$};

            \fill[red!80!black] (0,0.8) circle (2pt) node[right] {};
            \fill[black] (-2.2,0) circle (2pt) node[below] {$-L$};
            \fill[black] (2.2,0) circle (2pt) node[below] {$L$};

        \end{tikzpicture}
    \end{minipage}
\end{figure}

No, the exact solution is given in terms of \textit{modified Bessel functions}, and in the limit for \(r \sim \infty\) then \(D(x-y) \sim e^{-mr} \neq 0\); but we can arrive at the same solution with approximated considerations: all the terms inside the integral are positive, so the integral cannot be zero; furthermore, the exponential term \(e^{-yr}\) suppresses the contributions for large \(y\), so the main contribution comes from \(y \sim m\), but they are nonetheless different from zero, so the whole integral is non zero.

This seems similar to what we obtained in RQM, but it is not: if we indeed consider the previous result
\[
    \Delta(x-y) = \left[\hat \psi(x),\, \hat \psi(y)\right] = 0
\]
for spacelike separations, so we can write
\[
    \begin{aligned}
        \Delta(x-y) & = \bra{0}\Delta(x-y)\ket{0} = \bra{0} \left[\hat \psi(x),\, \hat \psi(y)\right] \ket{0}                      \\
                    & = \bra{0} \hat \psi(x) \hat \psi(y)\ket{0} - \bra{0} \hat \psi(y) \hat \psi(x)\ket{0} = D(x-y) - D(y-x) = 0;
    \end{aligned}
\]
Note that KG theory cannot distinguish particles from antiparticles, since it does not account for charge degrees of freedom; but if we \textbf{consider the complex KG field} we can interpret this result as the \textit{probability amplitude for a particle to go from y to x minus the probability of the antiparticle going from x to y}, which is an interpratation of antiparticles going backward in time to preserve the causality outside the light cone.

If we consider the expressions of the field operators for complex KG fields:
\[
    \begin{aligned}
        \hat{\psi}^{\dagger} (y) & \propto \hat{a}_{-} + \hat{a}^{\dagger}_{+}, \\
        \hat{\psi} (x)           & \propto \hat{a}_{+} + \hat{a}^{\dagger}_{-},
    \end{aligned}
\]
where \(\hat{a}_{+}\) and \(\hat{a}^{\dagger}_{+}\) are the annihilation and creation operators for particles, while \(\hat{a}_{-}\) and \(\hat{a}^{\dagger}_{-}\) are the annihilation and creation operators for antiparticles, then we can understand the two terms in the previous expression for the propagator outside the light cone: the first term \(D(x-y)\) is the amplitude for a particle created in \(y\) to be annihilated in \(x\), while the second term \(D(y-x)\) is the amplitude for an antiparticle created in \(x\) to be annihilated in \(y\), which we can read as an antiparticle created in \(y\) propagating backwards in time to be annihilated in \(x\) (this because if we apply consequently the operators we see that states of particle created in \(y\) and antiparticle created in \(x\) and viceversa are canceled in the final product with \(\bra{0}\)).

We do not need the amplitude of this event to be null, since we \textbf{cannot measure it} anyway: the propagator is the quantity we need to be zero, since it is proportional to the commutator of the fields, which has to vanish to preserve causality. We need measurements at spacelike separated events to be independent, not the individual amplitudes of particles and antiparticles propagating outside the light cone.

If we want a state in which we have a particle in the past and then in the future, we can also read this as a particle in \(y\) with a non zero probability of propagating outside its light cone, which is annihilated before this can happen from the creation of a couple of particle / antiparticle in \(x\), where the new particle can propagate in the future while the antiparticle travels backwards in time to annihilate with the initial particle. We were computing just one half of the amplitude. All this comes from intrepretation of the mathematical results of our equations. We are looking at one individual phenomenon made up by two distinct contributions.

\begin{figure}[H]
    \centering
    \begin{tikzpicture}[scale=1]

        % Style for arrows at the middle of the line
        \tikzset{
            midarrow/.style={
                    decoration={markings, mark=at position 0.55 with {\arrow[scale=1.5, >=stealth]{>}}},
                    postaction={decorate}
                },
            % Simplified light cone style
            lightcone/.style={dashed, gray, thin}
        }

        % ==========================================
        % DIAGRAM 1: Particle y -> x
        % ==========================================
        \begin{scope}
            % Define coordinates INSIDE this scope to avoid overlaps
            \coordinate (Y) at (0,0);
            \coordinate (X) at (3,0.8);

            % Title
            \node[font=\bfseries] at (1.5, 2) {1. Particle ($y \to x$)};
            \node[font=\small, blue] at (1.5, 1.6) {$\langle 0 | \phi(x)\phi^\dagger(y) | 0 \rangle$};

            % Light Cones
            \draw[lightcone] (Y) -- ++(-1,1);
            \draw[lightcone] (Y) -- ++(1,1);
            \draw[lightcone] (Y) -- ++(-1,-1);
            \draw[lightcone] (Y) -- ++(1,-1);

            \draw[lightcone] (X) -- ++(-1,1);
            \draw[lightcone] (X) -- ++(1,1);
            \draw[lightcone] (X) -- ++(-1,-1);
            \draw[lightcone] (X) -- ++(1,-1);

            % Propagator (Blue Line)
            \draw[midarrow, very thick, blue!80!cyan] (Y) -- (X);

            % Points
            \filldraw (Y) circle (2pt) node[below] {$y$};
            \filldraw (X) circle (2pt) node[below] {$x$};

        \end{scope}

        % ==========================================
        % MINUS SIGN (Positioned between the two scopes)
        % ==========================================
        \node[font=\Huge\bfseries] at (4.5, 0.4) {$-$};

        % ==========================================
        % DIAGRAM 2: Antiparticle x -> y
        % ==========================================
        \begin{scope}[xshift=6cm]
            % Redefine coordinates relative to THIS shifted scope
            \coordinate (Y) at (0,0);
            \coordinate (X) at (3,0.8);

            % Title
            \node[font=\bfseries] at (1.5, 2) {2. Antiparticle ($x \to y$)};
            \node[font=\small, red!80!black] at (1.5, 1.6) {$\langle 0 | \phi^\dagger(y)\phi(x) | 0 \rangle$};

            % Light Cones
            \draw[lightcone] (Y) -- ++(-1,1);
            \draw[lightcone] (Y) -- ++(1,1);
            \draw[lightcone] (Y) -- ++(-1,-1);
            \draw[lightcone] (Y) -- ++(1,-1);

            \draw[lightcone] (X) -- ++(-1,1);
            \draw[lightcone] (X) -- ++(1,1);
            \draw[lightcone] (X) -- ++(-1,-1);
            \draw[lightcone] (X) -- ++(1,-1);

            % Propagator (Red Line - Opposite Direction)
            \draw[midarrow, very thick, red!80!orange] (X) -- (Y);

            % Points
            \filldraw (Y) circle (2pt) node[below] {$y$};
            \filldraw (X) circle (2pt) node[below] {$x$};

        \end{scope}

        % ==========================================
        % RESULT
        % ==========================================
        \begin{scope}[xshift=2cm]
            \node[font=\Huge\bfseries] at (9, 0.8) {$= 0$};
            \node[font=\bfseries, gray, align=center] at (9, 0) {(Causality)};
        \end{scope}

    \end{tikzpicture}
\end{figure}

If we imagine, for example, a measurement of a particle arriving in \(y\) and another measurement telling us that \textit{the same particle} is propagating then in the future cone of \(x\), we are indeed summing diagrams where before \(y\) and after \(x\) we have the same phenomenon (a particle of \textit{the same type} propagating), but between \(x\) and \(y\) we have in a case the particle propagating faster than light, in the other the produced antiparticle (we can imagine a particle antiparticle pair created in \(x\)) traveling backward in time faster than light only to annihilate with the other old particle in \(y\). This physical intuition is mostly due to Feynman and his diagrams.

\begin{figure}[H]
    \centering
    \begin{tikzpicture}[scale=0.7]

        % Style for arrows at the middle of the line
        \tikzset{
            midarrow/.style={
                    decoration={markings, mark=at position 0.55 with {\arrow[scale=1, >=stealth]{>}}},
                    postaction={decorate}
                },
            % Simplified light cone style
            lightcone/.style={dashed, gray, thin}
        }

        % ==========================================
        % DIAGRAM 1: Particle y -> x
        % ==========================================
        \begin{scope}
            % Define coordinates INSIDE this scope to avoid overlaps
            \coordinate (Y) at (0,0);
            \coordinate (X) at (3,0.8);
            \coordinate (W) at (-0.5,-1);

            % Light Cones
            \draw[lightcone] (Y) -- ++(-1,1);
            \draw[lightcone] (Y) -- ++(1,1);
            \draw[lightcone] (Y) -- ++(-1,-1);
            \draw[lightcone] (Y) -- ++(1,-1);

            \draw[lightcone] (X) -- ++(-1,1);
            \draw[lightcone] (X) -- ++(1,1);
            \draw[lightcone] (X) -- ++(-1,-1);
            \draw[lightcone] (X) -- ++(1,-1);

            % Propagator (Blue Line)
            \draw[midarrow, thick, blue!80!cyan] (Y) -- (X);
            \draw[midarrow, thick, blue!80!cyan] (W) -- (Y);

            % Points
            \filldraw (Y) circle (2pt) node[below] {$y$};
            \filldraw (X) circle (2pt) node[below] {$x$};

        \end{scope}

        % ==========================================
        % MINUS SIGN (Positioned between the two scopes)
        % ==========================================
        \node[font=\Huge\bfseries] at (4.5, 0.4) {$-$};

        % ==========================================
        % DIAGRAM 2: Antiparticle x -> y
        % ==========================================
        \begin{scope}[xshift=6cm]
            % Redefine coordinates relative to THIS shifted scope
            \coordinate (Y) at (0,0);
            \coordinate (X) at (3,0.8);
            \coordinate (Z) at (3.4,1.8);


            % Light Cones
            \draw[lightcone] (Y) -- ++(-1,1);
            \draw[lightcone] (Y) -- ++(1,1);
            \draw[lightcone] (Y) -- ++(-1,-1);
            \draw[lightcone] (Y) -- ++(1,-1);

            \draw[lightcone] (X) -- ++(-1,1);
            \draw[lightcone] (X) -- ++(1,1);
            \draw[lightcone] (X) -- ++(-1,-1);
            \draw[lightcone] (X) -- ++(1,-1);

            % Propagator (Red Line - Opposite Direction)
            \draw[midarrow, thick, red!80!orange] (X) -- (Y);
            \draw[midarrow, thick, red!80!orange] (X) -- (Z);

            % Points
            \filldraw (Y) circle (2pt) node[below] {$y$};
            \filldraw (X) circle (2pt) node[below] {$x$};

        \end{scope}

        % ==========================================
        % EQUAL SIGN (Positioned between the two scopes)
        % ==========================================
        \node[font=\Huge\bfseries] at (10.5, 0.4) {$=$};

        % ==========================================
        % RESULT
        % ==========================================
        \begin{scope}[xshift=12cm]
            \coordinate (Y) at (0,0);
            \coordinate (X) at (3,0.8);
            \coordinate (W) at (-0.5,-1);
            \coordinate (Z) at (3.4,1.8);


            % Light Cones
            \draw[lightcone] (Y) -- ++(-1,1);
            \draw[lightcone] (Y) -- ++(1,1);
            \draw[lightcone] (Y) -- ++(-1,-1);
            \draw[lightcone] (Y) -- ++(1,-1);

            \draw[lightcone] (X) -- ++(-1,1);
            \draw[lightcone] (X) -- ++(1,1);
            \draw[lightcone] (X) -- ++(-1,-1);
            \draw[lightcone] (X) -- ++(1,-1);

            \draw[midarrow, thick, red!80!orange] (X) -- (Z);
            \draw[midarrow, thick, blue!80!cyan] (W) -- (Y);
            \draw[dashed, thick, yellow!80!black] (X) -- (Y);

            % Points
            \filldraw (Y) circle (2pt) node[below] {$y$};
            \filldraw (X) circle (2pt) node[below] {$x$};
        \end{scope}

    \end{tikzpicture}
\end{figure}


This kind of phenomena are called \textit{virtual phenomena}, since they cannot be measured observed, but mathematic tells us that this happens and saves our theory; even in Feynman diagrams, the virtual particle does not respect an equation of motion, there is its existence for a really brief moment, and due to uncertainty in energy we can justify its existence and our computing methods and interpretations.

\subsection{Green Functions}

\subsection{Feynman Propagator}